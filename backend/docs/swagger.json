{
    "schemes": [
        "http",
        "https"
    ],
    "swagger": "2.0",
    "info": {
        "description": "专为教育场景设计的音频播放系统API",
        "title": "语言学习音频播放器 API",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "API Support",
            "url": "http://www.yourcompany.com/support",
            "email": "support@yourcompany.com"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api",
    "paths": {
        "/api/admin/stats": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "获取系统运行的统计数据",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "admin"
                ],
                "summary": "获取系统统计信息",
                "responses": {
                    "200": {
                        "description": "系统统计信息",
                        "schema": {
                            "$ref": "#/definitions/main.SystemStats"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "无管理员权限",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/admin/users": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "获取所有系统用户的列表",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "admin"
                ],
                "summary": "获取系统用户列表",
                "responses": {
                    "200": {
                        "description": "用户列表",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "无管理员权限",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "创建新的系统用户",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "admin"
                ],
                "summary": "创建系统用户",
                "parameters": [
                    {
                        "description": "用户信息",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "创建成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "请求无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "无管理员权限",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/admin/users/{userId}": {
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "更新现有系统用户的信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "admin"
                ],
                "summary": "更新系统用户",
                "parameters": [
                    {
                        "type": "string",
                        "description": "用户ID",
                        "name": "userId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "用户更新信息",
                        "name": "user",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "更新成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "请求无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "无管理员权限",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "用户不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "删除指定的系统用户",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "admin"
                ],
                "summary": "删除系统用户",
                "parameters": [
                    {
                        "type": "string",
                        "description": "用户ID",
                        "name": "userId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "删除成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "无管理员权限",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "用户不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/audio/adaptive/{trackId}": {
            "get": {
                "description": "基于网络状况和客户端能力自动选择合适质量的音频流",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/octet-stream"
                ],
                "tags": [
                    "audio"
                ],
                "summary": "自适应音频流",
                "parameters": [
                    {
                        "type": "string",
                        "description": "音轨ID",
                        "name": "trackId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "访问令牌",
                        "name": "token",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "音频文件",
                        "schema": {
                            "type": "file"
                        }
                    },
                    "400": {
                        "description": "请求无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "音频文件不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/audio/metadata/{trackId}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "获取音频文件的元数据信息，包括波形数据",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "audio"
                ],
                "summary": "获取音频元数据",
                "parameters": [
                    {
                        "type": "string",
                        "description": "音轨ID",
                        "name": "trackId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "音频元数据",
                        "schema": {
                            "$ref": "#/definitions/main.AudioMetadata"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "音频文件不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/audio/stream/{trackId}": {
            "get": {
                "description": "流式传输音频内容，支持范围请求",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/octet-stream"
                ],
                "tags": [
                    "audio"
                ],
                "summary": "获取音频流",
                "parameters": [
                    {
                        "type": "string",
                        "description": "音轨ID",
                        "name": "trackId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "访问令牌",
                        "name": "token",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "范围请求头",
                        "name": "Range",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "音频文件",
                        "schema": {
                            "type": "file"
                        }
                    },
                    "206": {
                        "description": "部分内容(范围请求)",
                        "schema": {
                            "type": "file"
                        }
                    },
                    "400": {
                        "description": "请求无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "访问被拒绝",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "音频文件不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/audio/token/{trackId}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "生成用于访问音频资源的临时令牌",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "audio"
                ],
                "summary": "获取音频访问令牌",
                "parameters": [
                    {
                        "type": "string",
                        "description": "音轨ID",
                        "name": "trackId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "令牌请求",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/main.AudioTokenRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "令牌响应",
                        "schema": {
                            "$ref": "#/definitions/main.AudioTokenResponse"
                        }
                    },
                    "400": {
                        "description": "请求无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "访问被拒绝",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "音频文件不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/audio/upload": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "上传用户自定义音频文件",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "audio"
                ],
                "summary": "上传自定义音频",
                "parameters": [
                    {
                        "type": "file",
                        "description": "音频文件",
                        "name": "file",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "音频标题",
                        "name": "title",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "课程ID",
                        "name": "courseId",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "单元ID",
                        "name": "unitId",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "201": {
                        "description": "上传成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "请求无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "413": {
                        "description": "文件过大",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/audio/user-tracks": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "获取当前用户上传的所有音频文件",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "audio"
                ],
                "summary": "获取用户音频列表",
                "responses": {
                    "200": {
                        "description": "音频列表",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/main.TrackResponse"
                            }
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/auth/login": {
            "post": {
                "description": "验证用户凭据并返回JWT令牌",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "用户登录",
                "parameters": [
                    {
                        "description": "登录信息",
                        "name": "loginRequest",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/main.LoginRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "登录成功",
                        "schema": {
                            "$ref": "#/definitions/main.LoginResponse"
                        }
                    },
                    "400": {
                        "description": "请求无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "认证失败",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/auth/logout": {
            "post": {
                "description": "清除用户认证信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "用户登出",
                "responses": {
                    "200": {
                        "description": "登出成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/auth/register": {
            "post": {
                "description": "创建新用户账户并返回JWT令牌",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "用户注册",
                "parameters": [
                    {
                        "description": "注册信息",
                        "name": "registerRequest",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/main.RegisterRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "注册成功",
                        "schema": {
                            "$ref": "#/definitions/main.LoginResponse"
                        }
                    },
                    "400": {
                        "description": "请求无效或邮箱已被注册",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "服务器错误",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/auth/validate": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "验证当前用户会话状态并返回用户信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "auth"
                ],
                "summary": "验证用户会话",
                "responses": {
                    "200": {
                        "description": "用户信息",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "401": {
                        "description": "无效会话",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/courses": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "获取当前用户可访问的所有课程",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "获取用户课程列表",
                "responses": {
                    "200": {
                        "description": "课程列表",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/courses/{courseId}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "获取指定课程的详细信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "获取课程详情",
                "parameters": [
                    {
                        "type": "string",
                        "description": "课程ID",
                        "name": "courseId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "课程详情",
                        "schema": {
                            "$ref": "#/definitions/main.CourseInfo"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "访问被拒绝",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "课程不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/courses/{courseId}/units": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "获取指定课程的所有单元",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "获取课程单元列表",
                "parameters": [
                    {
                        "type": "string",
                        "description": "课程ID",
                        "name": "courseId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "课程单元列表",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/main.CourseUnitInfo"
                            }
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "访问被拒绝",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "课程不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/courses/{courseId}/units/{unitId}/custom-tracks": {
            "get": {
                "description": "获取用户在指定课程和单元下的自定义音轨",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "custom-tracks"
                ],
                "summary": "获取用户自定义音轨",
                "parameters": [
                    {
                        "type": "string",
                        "description": "课程ID",
                        "name": "courseId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "单元ID",
                        "name": "unitId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "自定义音轨列表",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/main.CustomTrack"
                            }
                        }
                    },
                    "400": {
                        "description": "参数无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "description": "上传并添加新的自定义音轨",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "custom-tracks"
                ],
                "summary": "添加自定义音轨",
                "parameters": [
                    {
                        "type": "string",
                        "description": "课程ID",
                        "name": "courseId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "单元ID",
                        "name": "unitId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "file",
                        "description": "音频文件",
                        "name": "audioFile",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "音轨标题",
                        "name": "title",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "中文标题",
                        "name": "chineseName",
                        "in": "formData"
                    }
                ],
                "responses": {
                    "201": {
                        "description": "添加成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "参数无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "413": {
                        "description": "文件过大",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/courses/{courseId}/units/{unitId}/custom-tracks/{trackId}": {
            "delete": {
                "description": "删除用户创建的自定义音轨",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "custom-tracks"
                ],
                "summary": "删除自定义音轨",
                "parameters": [
                    {
                        "type": "string",
                        "description": "课程ID",
                        "name": "courseId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "单元ID",
                        "name": "unitId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "音轨ID",
                        "name": "trackId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "删除成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "参数无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "无权限操作",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "音轨不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            },
            "patch": {
                "description": "更新自定义音轨的标题和中文名称",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "custom-tracks"
                ],
                "summary": "更新自定义音轨",
                "parameters": [
                    {
                        "type": "string",
                        "description": "课程ID",
                        "name": "courseId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "单元ID",
                        "name": "unitId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "音轨ID",
                        "name": "trackId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新信息",
                        "name": "track",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "更新成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "参数无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "无权限操作",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "音轨不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/courses/{courseId}/units/{unitId}/custom-tracks/{trackId}/reorder": {
            "post": {
                "description": "调整自定义音轨的排序顺序",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "custom-tracks"
                ],
                "summary": "重排序自定义音轨",
                "parameters": [
                    {
                        "type": "string",
                        "description": "课程ID",
                        "name": "courseId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "单元ID",
                        "name": "unitId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "音轨ID",
                        "name": "trackId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "排序信息",
                        "name": "order",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "object"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "排序成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "参数无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "无权限操作",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "音轨不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/courses/{courseId}/units/{unitId}/tracks": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "获取指定课程单元的所有音轨",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "courses"
                ],
                "summary": "获取单元音轨列表",
                "parameters": [
                    {
                        "type": "string",
                        "description": "课程ID",
                        "name": "courseId",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "单元ID",
                        "name": "unitId",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "音轨列表",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "访问被拒绝",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "课程或单元不存在",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/health": {
            "get": {
                "description": "检查API和数据库状态",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "system"
                ],
                "summary": "健康检查",
                "responses": {
                    "200": {
                        "description": "服务状态",
                        "schema": {
                            "$ref": "#/definitions/main.HealthResponse"
                        }
                    }
                }
            }
        },
        "/api/recent-tracks": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "获取用户最近播放过的音轨列表",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "tracks"
                ],
                "summary": "获取最近播放记录",
                "responses": {
                    "200": {
                        "description": "最近播放列表",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/main.RecentTrackInfo"
                            }
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/api/track-progress": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "保存用户的音轨播放位置和完成率",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "tracks"
                ],
                "summary": "更新音轨播放进度",
                "parameters": [
                    {
                        "description": "进度信息",
                        "name": "progress",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/main.TrackProgressRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "更新成功",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "请求无效",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "未授权访问",
                        "schema": {
                            "$ref": "#/definitions/main.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "main.AudioBookmark": {
            "type": "object",
            "properties": {
                "color": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "label": {
                    "type": "string"
                },
                "notes": {
                    "type": "string"
                },
                "timePoint": {
                    "type": "number"
                }
            }
        },
        "main.AudioMetadata": {
            "type": "object",
            "properties": {
                "artist": {
                    "type": "string"
                },
                "bitRate": {
                    "type": "integer"
                },
                "bookmarks": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/main.AudioBookmark"
                    }
                },
                "channels": {
                    "type": "integer"
                },
                "customData": {
                    "type": "object",
                    "additionalProperties": true
                },
                "duration": {
                    "type": "number"
                },
                "format": {
                    "type": "string"
                },
                "sampleRate": {
                    "type": "integer"
                },
                "spectralData": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    }
                },
                "title": {
                    "type": "string"
                },
                "trackId": {
                    "type": "string"
                },
                "transcriptData": {
                    "$ref": "#/definitions/main.AudioTranscript"
                },
                "waveformData": {
                    "type": "array",
                    "items": {
                        "type": "number"
                    }
                }
            }
        },
        "main.AudioTokenRequest": {
            "type": "object",
            "required": [
                "action",
                "courseId",
                "trackId",
                "unitId"
            ],
            "properties": {
                "action": {
                    "type": "string",
                    "enum": [
                        "stream_audio",
                        "get_metadata"
                    ]
                },
                "courseId": {
                    "type": "string"
                },
                "trackId": {
                    "type": "string"
                },
                "unitId": {
                    "type": "string"
                }
            }
        },
        "main.AudioTokenResponse": {
            "description": "音频访问令牌响应",
            "type": "object",
            "properties": {
                "expiresAt": {
                    "description": "过期时间戳",
                    "type": "integer",
                    "example": 1609459200
                },
                "token": {
                    "description": "访问令牌",
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                }
            }
        },
        "main.AudioTranscript": {
            "type": "object",
            "properties": {
                "language": {
                    "type": "string"
                },
                "segments": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/main.TranscriptSegment"
                    }
                }
            }
        },
        "main.CourseInfo": {
            "type": "object",
            "properties": {
                "createdAt": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "imageUrl": {
                    "type": "string"
                },
                "language": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "unitCount": {
                    "type": "integer"
                },
                "updatedAt": {
                    "type": "string"
                }
            }
        },
        "main.CourseUnitInfo": {
            "type": "object",
            "properties": {
                "courseId": {
                    "type": "string"
                },
                "createdAt": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "order": {
                    "type": "integer"
                },
                "title": {
                    "type": "string"
                },
                "trackCount": {
                    "type": "integer"
                },
                "updatedAt": {
                    "type": "string"
                }
            }
        },
        "main.CustomTrack": {
            "type": "object",
            "properties": {
                "chineseName": {
                    "type": "string"
                },
                "courseId": {
                    "type": "string"
                },
                "createdAt": {
                    "type": "string"
                },
                "custom": {
                    "type": "boolean"
                },
                "duration": {
                    "type": "number"
                },
                "fileSize": {
                    "type": "integer"
                },
                "format": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "sortOrder": {
                    "type": "integer"
                },
                "title": {
                    "type": "string"
                },
                "unitId": {
                    "type": "string"
                },
                "updatedAt": {
                    "type": "string"
                },
                "userId": {
                    "type": "string"
                }
            }
        },
        "main.ErrorResponse": {
            "description": "API错误响应",
            "type": "object",
            "properties": {
                "error": {
                    "description": "错误信息",
                    "type": "string",
                    "example": "未授权访问"
                }
            }
        },
        "main.HealthResponse": {
            "description": "健康检查响应",
            "type": "object",
            "properties": {
                "db": {
                    "description": "数据库状态",
                    "type": "string",
                    "example": "healthy"
                },
                "status": {
                    "description": "服务状态",
                    "type": "string",
                    "example": "ok"
                },
                "version": {
                    "description": "API版本",
                    "type": "string",
                    "example": "1.0.0"
                }
            }
        },
        "main.LoginRequest": {
            "type": "object",
            "required": [
                "email",
                "password"
            ],
            "properties": {
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            }
        },
        "main.LoginResponse": {
            "description": "登录成功响应",
            "type": "object",
            "properties": {
                "message": {
                    "description": "成功消息",
                    "type": "string",
                    "example": "登录成功"
                },
                "token": {
                    "description": "JWT令牌",
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                },
                "user": {
                    "description": "用户信息",
                    "type": "object",
                    "properties": {
                        "email": {
                            "description": "用户邮箱",
                            "type": "string",
                            "example": "user@example.com"
                        },
                        "id": {
                            "description": "用户ID",
                            "type": "string",
                            "example": "123e4567-e89b-12d3-a456-426614174000"
                        },
                        "name": {
                            "description": "用户名称",
                            "type": "string",
                            "example": "测试用户"
                        },
                        "role": {
                            "description": "用户角色",
                            "type": "string",
                            "example": "user"
                        }
                    }
                }
            }
        },
        "main.RecentTrackInfo": {
            "type": "object",
            "properties": {
                "completionRate": {
                    "type": "number"
                },
                "courseId": {
                    "type": "string"
                },
                "courseName": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "lastAccessed": {
                    "type": "string"
                },
                "lastPosition": {
                    "type": "number"
                },
                "title": {
                    "type": "string"
                },
                "unitId": {
                    "type": "string"
                }
            }
        },
        "main.RegisterRequest": {
            "type": "object",
            "required": [
                "email",
                "name",
                "password"
            ],
            "properties": {
                "email": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "password": {
                    "type": "string",
                    "minLength": 8
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "main.SystemStats": {
            "type": "object",
            "properties": {
                "activeUsers": {
                    "type": "integer"
                },
                "averageApiLatency": {
                    "description": "毫秒",
                    "type": "number"
                },
                "databaseSize": {
                    "description": "字节",
                    "type": "integer"
                },
                "lastRestart": {
                    "type": "string"
                },
                "systemUptime": {
                    "description": "小时",
                    "type": "number"
                },
                "totalAudioFiles": {
                    "type": "integer"
                },
                "totalCourses": {
                    "type": "integer"
                },
                "totalStorage": {
                    "description": "字节",
                    "type": "integer"
                },
                "totalUsers": {
                    "type": "integer"
                }
            }
        },
        "main.TrackProgressRequest": {
            "type": "object",
            "required": [
                "position",
                "trackId"
            ],
            "properties": {
                "completionRate": {
                    "type": "number",
                    "maximum": 100,
                    "minimum": 0
                },
                "position": {
                    "type": "number",
                    "minimum": 0
                },
                "trackId": {
                    "type": "string"
                }
            }
        },
        "main.TrackResponse": {
            "description": "音轨信息响应",
            "type": "object",
            "properties": {
                "chineseName": {
                    "description": "中文标题",
                    "type": "string",
                    "example": "听力练习1：问候语"
                },
                "custom": {
                    "description": "是否为自定义音轨",
                    "type": "boolean",
                    "example": false
                },
                "duration": {
                    "description": "音轨时长(秒)",
                    "type": "number",
                    "example": 65.5
                },
                "id": {
                    "description": "音轨ID",
                    "type": "string",
                    "example": "track-789"
                },
                "sortOrder": {
                    "description": "排序顺序",
                    "type": "integer",
                    "example": 1
                },
                "title": {
                    "description": "音轨标题",
                    "type": "string",
                    "example": "听力练习1：问候语"
                },
                "unitId": {
                    "description": "单元ID",
                    "type": "string",
                    "example": "unit-456"
                }
            }
        },
        "main.TranscriptSegment": {
            "type": "object",
            "properties": {
                "endTime": {
                    "type": "number"
                },
                "startTime": {
                    "type": "number"
                },
                "text": {
                    "type": "string"
                }
            }
        }
    },
    "securityDefinitions": {
        "BearerAuth": {
            "description": "使用Bearer方案的JWT授权头，格式为: Bearer {token}",
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        }
    }
}